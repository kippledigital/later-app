<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Later — Your calm digital companion</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="src/js/data.js"></script>
  <script src="src/js/navigation.js"></script>
  <script src="src/js/capture.js"></script>
  <script src="src/js/items.js"></script>
  <script src="src/js/enhanced-swipe.js"></script>
  <script src="src/js/app.js"></script>
<style>
@keyframes shimmerX { from { transform: translate3d(-40%,0,0) skewX(-12deg); } to { transform: translate3d(140%,0,0) skewX(-12deg); } }

/* Enhanced swipe animations */
.swipe-item {
  position: relative;
  overflow: hidden;
  transition: all 0.2s ease;
}

.swipe-item.swiping {
  z-index: 10;
}

.swipe-item .card-content {
  will-change: transform, opacity;
  backface-visibility: hidden;
  transform-style: preserve-3d;
}

.swipe-indicators {
  transition: opacity 0.2s ease;
}

/* Success feedback animation */
@keyframes slideInFromTop {
  from {
    transform: translate(-50%, -20px);
    opacity: 0;
  }
  to {
    transform: translate(-50%, 0);
    opacity: 1;
  }
}

@keyframes slideOutToTop {
  from {
    transform: translate(-50%, 0);
    opacity: 1;
  }
  to {
    transform: translate(-50%, -20px);
    opacity: 0;
  }
}

/* Category menu animations */
#categoryMenu {
  animation: slideInFromTop 0.2s ease-out;
}

/* Confirmation dialog animations */
#confirmationDialog {
  animation: fadeIn 0.2s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Haptic feedback simulation */
@keyframes hapticPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(0.999); }
}
</style>
</head>
<body class="antialiased bg-slate-950 text-slate-200 selection:bg-cyan-400/30">
  <!-- App Shell -->
  <div class="min-h-[100dvh] w-full flex flex-col items-center">
    <!-- Safe area container -->
    <div class="w-full max-w-[460px] flex-1 flex flex-col">
      <!-- Top System Bar -->
      <div class="h-6"></div>

      <!-- App Header -->
      <header class="relative px-4 pt-2 pb-3 sticky top-0 z-40 bg-slate-950/80 backdrop-blur supports-[backdrop-filter]:bg-slate-950/70 border-b border-white/5">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-2">
            <div class="flex h-8 w-8 items-center justify-center rounded-md bg-cyan-400/15 ring-1 ring-cyan-400/25">
              <span class="text-cyan-300 text-[13px] tracking-tight font-semibold" style="letter-spacing:-0.02em;">L</span>
            </div>
            <span class="text-sm text-slate-400">Later</span>
          </div>
          <div class="flex items-center gap-2">
            <!-- Loading sync pill -->
            <div id="syncPill" class="hidden items-center gap-1.5 text-[12px] px-2 py-1 rounded-full bg-cyan-500/10 text-cyan-300 ring-1 ring-cyan-500/20">
              <i data-lucide="refresh-cw" class="w-3.5 h-3.5"></i>
              <span id="syncPillText">Loading…</span>
            </div>
            <button id="addDemoBtn" class="inline-flex items-center gap-2 text-[13px] px-2.5 py-1.5 rounded-md bg-white/5 hover:bg-white/10 ring-1 ring-white/10 transition-colors" title="Quick add demo item">
              <i data-lucide="sparkles" class="w-4 h-4 text-cyan-300"></i>
              <span class="text-slate-300">Add</span>
            </button>
            <button id="openSearchBtn" class="inline-flex items-center justify-center w-8 h-8 rounded-md bg-white/5 hover:bg-white/10 ring-1 ring-white/10 transition-colors" title="Search">
              <i data-lucide="search" class="w-4 h-4 text-slate-300"></i>
            </button>
          </div>
        </div>
        <!-- Navigation progress bar -->
        <div id="navProgress" class="pointer-events-none absolute inset-x-0 -bottom-px h-[2px] bg-cyan-400/80 opacity-0 origin-left scale-x-0 transform-gpu rounded-full" style="will-change: transform, opacity; transition: transform 900ms cubic-bezier(0.22,1,0.36,1), opacity 200ms ease;"></div>
        <!-- Offline / network banner -->
        <div id="netBanner" class="hidden mt-2 rounded-lg ring-1 ring-cyan-500/20 bg-cyan-500/10 px-3 py-2">
          <div class="flex items-center justify-between gap-3">
            <div class="flex items-center gap-2 text-cyan-300 text-[13px]">
              <i data-lucide="wifi-off" class="w-4 h-4"></i>
              <span>You're offline. Your space will sync when reconnected.</span>
            </div>
            <div class="flex items-center gap-2">
              <button id="retryNet" class="inline-flex items-center gap-1.5 text-[12px] px-2.5 py-1.5 rounded-md bg-white/5 hover:bg-white/10 text-cyan-300 ring-1 ring-white/10">
                <i data-lucide="refresh-cw" class="w-3.5 h-3.5"></i> Retry
              </button>
              <button id="dismissNet" class="inline-flex items-center justify-center w-8 h-8 rounded-md bg-white/5 hover:bg-white/10 ring-1 ring-white/10">
                <i data-lucide="x" class="w-4 h-4 text-slate-300"></i>
              </button>
            </div>
          </div>
        </div>
      </header>

      <!-- Screens -->
      <main id="screens" class="flex-1 relative overflow-hidden">
        <!-- Global shimmer overlay -->
        <div id="shimmerOverlay" class="pointer-events-none absolute inset-0 z-10 hidden overflow-hidden" aria-hidden="true">
          <div class="absolute inset-0 bg-slate-950/40"></div>
          <div class="absolute inset-y-0 left-0 h-full w-1/3 max-w-[280px] min-w-[160px] opacity-70" style="background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0) 100%); filter: blur(2px); will-change: transform; animation: shimmerX 1.1s linear infinite;"></div>
        </div>

        <!-- NOW / HOME -->
        <section id="screen-now" class="absolute inset-0 overflow-y-auto will-change-transform opacity-100 translate-y-0 transition-all duration-300">
          <div class="px-4 pt-5 pb-28">
            <!-- Greeting -->
            <div class="mb-5">
              <p id="greeting" class="text-[28px] md:text-[32px] leading-tight tracking-tight font-semibold text-slate-100"></p>
              <p id="contextSub" class="text-sm text-slate-400 mt-1"></p>
            </div>

            <!-- Empty State: Context-specific Now -->
            <div id="emptyNow" class="hidden mb-6">
              <div class="rounded-xl bg-white/5 ring-1 ring-white/10 p-4">
                <div class="flex items-start gap-3">
                  <div class="w-12 h-12 rounded-lg bg-slate-900 ring-1 ring-white/10 flex items-center justify-center shrink-0">
                    <i id="emptyNowIcon" data-lucide="sunrise" class="w-5 h-5 text-cyan-300"></i>
                  </div>
                  <div class="flex-1 min-w-0">
                    <div class="flex items-center gap-2 mb-1.5">
                      <span id="emptyNowKicker" class="text-[11px] px-1.5 py-0.5 rounded bg-cyan-400/10 text-cyan-300 ring-1 ring-cyan-400/20">Morning focus</span>
                      <span class="text-[11px] text-slate-400">No items for this context</span>
                    </div>
                    <h3 id="emptyNowTitle" class="text-[15px] font-medium tracking-tight text-slate-100">Your space is ready for a clear start</h3>
                    <p id="emptyNowBody" class="text-[13px] text-slate-400 mt-0.5">Set one gentle intention or save something inspiring for later.</p>
                    <div class="mt-3 flex items-center gap-2">
                      <button id="emptyNowPrimary" class="inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-cyan-500/15 hover:bg-cyan-500/25 text-cyan-300 ring-1 ring-cyan-500/25">
                        <i data-lucide="target" class="w-4 h-4"></i>
                        Plan one focus
                      </button>
                      <button id="emptyNowSecondary" class="inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-white/5 hover:bg-white/10 text-slate-300 ring-1 ring-white/10">
                        <i data-lucide="inbox" class="w-4 h-4"></i>
                        Review Inbox
                      </button>
                    </div>
                  </div>
                  <img id="emptyNowImg" src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=240&auto=format&fit=crop" alt="" class="hidden sm:block w-16 h-16 rounded-lg object-cover ring-1 ring-white/10 shrink-0">
                </div>
              </div>
            </div>

            <!-- Section: Might Need Attention -->
            <div id="section-attention" class="mb-7">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-2">
                  <i data-lucide="circle-alert" class="w-4 h-4 text-cyan-300"></i>
                  <h2 class="text-[18px] tracking-tight font-semibold text-slate-100">Might Need Attention</h2>
                </div>
                <button data-nav="inbox" class="text-[13px] text-cyan-300 hover:text-cyan-200 hover:underline">See All</button>
              </div>
              <div class="space-y-3" id="attentionCards">
                <!-- Email Card -->
                <article class="rounded-xl bg-white/5 ring-1 ring-white/10 p-3 transition-all duration-300">
                  <div class="flex items-start gap-3">
                    <div class="shrink-0 mt-0.5">
                      <div class="w-8 h-8 rounded-md bg-slate-900 ring-1 ring-white/10 flex items-center justify-center">
                        <i data-lucide="mail" class="w-4 h-4 text-slate-300"></i>
                      </div>
                    </div>
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2 mb-1">
                        <span class="text-[11px] px-1.5 py-0.5 rounded bg-cyan-400/10 text-cyan-300 ring-1 ring-cyan-400/20">Action</span>
                        <span class="text-[11px] text-slate-400 flex items-center gap-1"><i data-lucide="clock" class="w-3.5 h-3.5"></i>2 min reply</span>
                      </div>
                      <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">School update: Field trip forms due</h3>
                      <p class="text-[13px] text-slate-400 line-clamp-2">The 5th grade trip is scheduled for next Friday. Please complete the attached consent form by Wednesday morning.</p>
                      <div class="mt-3 flex items-center gap-2">
                        <button class="inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-cyan-500/15 hover:bg-cyan-500/25 text-cyan-300 ring-1 ring-cyan-500/25 transition-colors">
                          <i data-lucide="reply" class="w-4 h-4"></i>
                          Reply
                        </button>
                        <button class="now-archive-btn inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-white/5 hover:bg-white/10 text-slate-300 ring-1 ring-white/10 transition-colors">
                          <i data-lucide="archive" class="w-4 h-4"></i>
                          Archive
                        </button>
                      </div>
                    </div>
                  </div>
                </article>

                <!-- Event Card -->
                <article class="rounded-xl bg-white/5 ring-1 ring-white/10 p-3 transition-all duration-300">
                  <div class="flex items-start gap-3">
                    <div class="shrink-0 mt-0.5">
                      <div class="w-8 h-8 rounded-md bg-slate-900 ring-1 ring-white/10 flex items-center justify-center">
                        <i data-lucide="calendar" class="w-4 h-4 text-slate-300"></i>
                      </div>
                    </div>
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2 mb-1">
                        <span class="text-[11px] px-1.5 py-0.5 rounded bg-cyan-400/10 text-cyan-300 ring-1 ring-cyan-400/20">Event</span>
                        <span class="text-[11px] text-slate-400 flex items-center gap-1"><i data-lucide="clock" class="w-3.5 h-3.5"></i>Starts Thu 3:30 PM</span>
                      </div>
                      <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">Dentist appointment</h3>
                      <p class="text-[13px] text-slate-400 line-clamp-2">Routine cleaning at Riverside Dental. Bring insurance card and previous X-rays.</p>
                      <div class="mt-3 flex items-center gap-2">
                        <button class="inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-cyan-500/15 hover:bg-cyan-500/25 text-cyan-300 ring-1 ring-cyan-500/25 transition-colors">
                          <i data-lucide="calendar-plus" class="w-4 h-4"></i>
                          Add to Calendar
                        </button>
                        <button class="now-done-btn inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-white/5 hover:bg-white/10 text-slate-300 ring-1 ring-white/10 transition-colors">
                          <i data-lucide="check" class="w-4 h-4"></i>
                          Done
                        </button>
                      </div>
                    </div>
                  </div>
                </article>
              </div>
            </div>

            <!-- Section: Continue Reading -->
            <div id="section-reading" class="mb-7">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-2">
                  <i data-lucide="book-open" class="w-4 h-4 text-cyan-300"></i>
                  <h2 class="text-[18px] tracking-tight font-semibold text-slate-100">Continue Reading</h2>
                </div>
                <button data-nav="library" class="text-[13px] text-cyan-300 hover:text-cyan-200 hover:underline">See All</button>
              </div>
              <div class="space-y-3" id="readingCards">
                <!-- Article 1 -->
                <article class="rounded-xl bg-white/5 ring-1 ring-white/10 p-3 transition-all duration-300">
                  <div class="flex items-start gap-3">
                    <img src="https://images.unsplash.com/photo-1496080174650-637e3f22fa03?q=80&w=400&auto=format&fit=crop" alt="Books and coffee" class="w-14 h-14 rounded-md object-cover ring-1 ring-white/10">
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2 mb-1">
                        <span class="text-[11px] px-1.5 py-0.5 rounded bg-cyan-400/10 text-cyan-300 ring-1 ring-cyan-400/20">Read Later</span>
                        <span class="text-[11px] text-slate-400 flex items-center gap-1"><i data-lucide="clock" class="w-3.5 h-3.5"></i>5 min read</span>
                        <span class="text-[11px] text-slate-500">40% through</span>
                      </div>
                      <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">The quiet power of consistent habits</h3>
                      <p class="text-[13px] text-slate-400 line-clamp-2">A gentle guide to building routines that stick, without the guilt or pressure of rigid schedules.</p>
                      <div class="mt-3 flex items-center gap-2">
                        <button class="read-btn inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-cyan-500/15 hover:bg-cyan-500/25 text-cyan-300 ring-1 ring-cyan-500/25 transition-colors">
                          <i data-lucide="book-open" class="w-4 h-4"></i>
                          Read
                        </button>
                        <button class="inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-white/5 hover:bg-white/10 text-slate-300 ring-1 ring-white/10 transition-colors">
                          <i data-lucide="bookmark" class="w-4 h-4"></i>
                          Save
                        </button>
                      </div>
                    </div>
                  </div>
                </article>

                <!-- Article 2 -->
                <article class="rounded-xl bg-white/5 ring-1 ring-white/10 p-3 transition-all duration-300">
                  <div class="flex items-start gap-3">
                    <img src="https://images.unsplash.com/photo-1531297484001-80022131f5a1?q=80&w=400&auto=format&fit=crop" alt="Laptop and desk" class="w-14 h-14 rounded-md object-cover ring-1 ring-white/10">
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2 mb-1">
                        <span class="text-[11px] px-1.5 py-0.5 rounded bg-cyan-400/10 text-cyan-300 ring-1 ring-cyan-400/20">Read Later</span>
                        <span class="text-[11px] text-slate-400 flex items-center gap-1"><i data-lucide="clock" class="w-3.5 h-3.5"></i>7 min read</span>
                        <span class="text-[11px] text-slate-500">12% through</span>
                      </div>
                      <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">Designing for calm technology</h3>
                      <p class="text-[13px] text-slate-400 line-clamp-2">Principles to create interfaces that respect attention and blend into daily life.</p>
                      <div class="mt-3 flex items-center gap-2">
                        <button class="read-btn inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-cyan-500/15 hover:bg-cyan-500/25 text-cyan-300 ring-1 ring-cyan-500/25 transition-colors">
                          <i data-lucide="book-open" class="w-4 h-4"></i>
                          Read
                        </button>
                        <button class="inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-white/5 hover:bg-white/10 text-slate-300 ring-1 ring-white/10 transition-colors">
                          <i data-lucide="bookmark" class="w-4 h-4"></i>
                          Save
                        </button>
                      </div>
                    </div>
                  </div>
                </article>
              </div>
              <!-- Empty state: Continue Reading -->
              <div id="emptyReading" class="hidden mt-3">
                <div class="rounded-xl bg-white/5 ring-1 ring-white/10 p-4">
                  <div class="flex items-center gap-2 mb-1.5">
                    <i data-lucide="book" class="w-4 h-4 text-cyan-300"></i>
                    <span class="text-sm font-medium text-slate-200">No articles queued — enjoy some quiet.</span>
                  </div>
                  <p class="text-sm text-slate-400">Save something you'd like to revisit and it'll appear here.</p>
                </div>
              </div>
            </div>

            <!-- Section: Explore Your Saves -->
            <div id="section-explore" class="mb-8">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-2">
                  <i data-lucide="compass" class="w-4 h-4 text-cyan-300"></i>
                  <h2 class="text-[18px] tracking-tight font-semibold text-slate-100">Explore Your Saves</h2>
                </div>
                <button data-nav="library" class="text-[13px] text-cyan-300 hover:text-cyan-200 hover:underline">See All</button>
              </div>
              <div class="grid grid-cols-1 gap-3" id="exploreCards">
                <article class="rounded-xl bg-gradient-to-br from-white/5 to-white/[0.03] ring-1 ring-white/10 p-3 transition-all duration-300">
                  <div class="flex items-start gap-3">
                    <div class="w-10 h-10 rounded-md bg-slate-900 ring-1 ring-white/10 flex items-center justify-center">
                      <i data-lucide="lightbulb" class="w-4 h-4 text-slate-300"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2 mb-1">
                        <span class="text-[11px] px-1.5 py-0.5 rounded bg-cyan-400/10 text-cyan-300 ring-1 ring-cyan-400/20">Idea</span>
                        <span class="text-[11px] text-slate-400">Saved yesterday</span>
                      </div>
                      <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">Cozy reading nook inspiration</h3>
                      <p class="text-[13px] text-slate-400 line-clamp-2">Soft light, low chair, and a small shelf — sketches and links for a corner that invites quiet focus.</p>
                      <div class="mt-3">
                        <button class="inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-white/5 hover:bg-white/10 text-slate-300 ring-1 ring-white/10 transition-colors">
                          <i data-lucide="folder-plus" class="w-4 h-4"></i>
                          Add to Collection
                        </button>
                      </div>
                    </div>
                  </div>
                </article>

                <article class="rounded-xl bg-white/5 ring-1 ring-white/10 p-3 transition-all duration-300">
                  <div class="flex items-start gap-3">
                    <img src="https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=400&auto=format&fit=crop" alt="Code on a screen" class="w-14 h-14 rounded-md object-cover ring-1 ring-white/10">
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2 mb-1">
                        <span class="text-[11px] px-1.5 py-0.5 rounded bg-cyan-400/10 text-cyan-300 ring-1 ring-cyan-400/20">Inspiration</span>
                        <span class="text-[11px] text-slate-400">Saved 3 days ago</span>
                      </div>
                      <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">Interfaces with soul</h3>
                      <p class="text-[13px] text-slate-400 line-clamp-2">Beautifully simple patterns that foster presence and curiosity.</p>
                      <div class="mt-3">
                        <button class="inline-flex items-center gap-1.5 text-[13px] px-2.5 py-1.5 rounded-md bg-white/5 hover:bg-white/10 text-slate-300 ring-1 ring-white/10 transition-colors">
                          <i data-lucide="eye" class="w-4 h-4"></i>
                          Open
                        </button>
                      </div>
                    </div>
                  </div>
                </article>
              </div>
              <!-- Empty state: Explore -->
              <div id="emptyExplore" class="hidden mt-3">
                <div class="rounded-xl bg-white/5 ring-1 ring-white/10 p-4">
                  <div class="flex items-center gap-2 mb-1.5">
                    <i data-lucide="compass" class="w-4 h-4 text-cyan-300"></i>
                    <span class="text-sm font-medium text-slate-200">No saved ideas yet — inspiration awaits.</span>
                  </div>
                  <p class="text-sm text-slate-400">Save links, notes, or images to start your creative library.</p>
                </div>
              </div>
            </div>

            <!-- Gentle divider -->
            <div class="h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>
          </div>
        </section>

        <!-- INBOX -->
        <section id="screen-inbox" class="absolute inset-0 overflow-y-auto hidden will-change-transform opacity-0 translate-y-1 transition-all duration-300">
          <div class="px-4 pt-5 pb-28">
            <div class="flex items-center justify-between mb-3">
              <h1 class="text-[20px] tracking-tight font-semibold text-slate-100">Inbox</h1>
              <div class="flex items-center gap-2">
                <div id="aiPill" class="hidden items-center gap-1.5 text-[12px] px-2 py-1 rounded-full bg-cyan-500/10 text-cyan-300 ring-1 ring-cyan-500/20 animate-pulse">
                  <i data-lucide="sparkles" class="w-3.5 h-3.5"></i>
                  <span>Organizing…</span>
                </div>
              </div>
            </div>

            <!-- Queue List -->
            <div id="inboxList" class="space-y-2 pt-2">
              <!-- Swipe item 1 -->
              <div class="swipe-item group relative rounded-xl overflow-hidden" data-id="1">
                <div class="absolute inset-0 flex items-center justify-between px-4 pointer-events-none">
                  <div class="flex items-center gap-2 opacity-0 group-[.swiping-right]:opacity-100 transition-opacity">
                    <i data-lucide="tag" class="w-4 h-4 text-emerald-300"></i>
                    <span class="text-[12px] text-emerald-300">Categorize</span>
                  </div>
                  <div class="flex items-center gap-2 opacity-0 group-[.swiping-left]:opacity-100 transition-opacity">
                    <span class="text-[12px] text-rose-300">Archive</span>
                    <i data-lucide="trash-2" class="w-4 h-4 text-rose-300"></i>
                  </div>
                </div>
                <div class="card-content relative bg-white/5 ring-1 ring-white/10 p-3 transition-transform duration-300 ease-out cursor-pointer">
                  <div class="flex items-start gap-3">
                    <div class="shrink-0">
                      <div class="w-8 h-8 rounded-md bg-slate-900 ring-1 ring-white/10 flex items-center justify-center">
                        <i data-lucide="mail" class="w-4 h-4 text-slate-300"></i>
                      </div>
                    </div>
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2 mb-1">
                        <button class="inbox-tag inline-flex items-center gap-1.5 text-[11px] px-1.5 py-0.5 rounded bg-white/5 text-slate-300 ring-1 ring-white/10">
                          <i data-lucide="tag" class="w-3.5 h-3.5"></i> Unsorted
                        </button>
                        <span class="text-[11px] text-slate-400 flex items-center gap-1"><i data-lucide="clock" class="w-3.5 h-3.5"></i>2h ago</span>
                      </div>
                      <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">Follow-up: Field trip forms</h3>
                      <p class="text-[13px] text-slate-400 line-clamp-2">Just checking if you had a chance to sign the consent form. Thank you!</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Swipe item 2 -->
              <div class="swipe-item group relative rounded-xl overflow-hidden" data-id="2">
                <div class="absolute inset-0 flex items-center justify-between px-4 pointer-events-none">
                  <div class="flex items-center gap-2 opacity-0 group-[.swiping-right]:opacity-100 transition-opacity">
                    <i data-lucide="tag" class="w-4 h-4 text-emerald-300"></i>
                    <span class="text-[12px] text-emerald-300">Categorize</span>
                  </div>
                  <div class="flex items-center gap-2 opacity-0 group-[.swiping-left]:opacity-100 transition-opacity">
                    <span class="text-[12px] text-rose-300">Archive</span>
                    <i data-lucide="trash-2" class="w-4 h-4 text-rose-300"></i>
                  </div>
                </div>
                <div class="card-content relative bg-white/5 ring-1 ring-white/10 p-3 transition-transform duration-300 ease-out cursor-pointer">
                  <div class="flex items-start gap-3">
                    <div class="shrink-0">
                      <div class="w-8 h-8 rounded-md bg-slate-900 ring-1 ring-white/10 flex items-center justify-center">
                        <i data-lucide="calendar" class="w-4 h-4 text-slate-300"></i>
                      </div>
                    </div>
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2 mb-1">
                        <button class="inbox-tag inline-flex items-center gap-1.5 text-[11px] px-1.5 py-0.5 rounded bg-white/5 text-slate-300 ring-1 ring-white/10">
                          <i data-lucide="tag" class="w-3.5 h-3.5"></i> Unsorted
                        </button>
                        <span class="text-[11px] text-slate-400 flex items-center gap-1"><i data-lucide="clock" class="w-3.5 h-3.5"></i>Today</span>
                      </div>
                      <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">Dentist appointment reminder</h3>
                      <p class="text-[13px] text-slate-400 line-clamp-2">Reminder for your routine cleaning on Thursday at 3:30 PM.</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Swipe item 3 -->
              <div class="swipe-item group relative rounded-xl overflow-hidden" data-id="3">
                <div class="absolute inset-0 flex items-center justify-between px-4 pointer-events-none">
                  <div class="flex items-center gap-2 opacity-0 group-[.swiping-right]:opacity-100 transition-opacity">
                    <i data-lucide="tag" class="w-4 h-4 text-emerald-300"></i>
                    <span class="text-[12px] text-emerald-300">Categorize</span>
                  </div>
                  <div class="flex items-center gap-2 opacity-0 group-[.swiping-left]:opacity-100 transition-opacity">
                    <span class="text-[12px] text-rose-300">Archive</span>
                    <i data-lucide="trash-2" class="w-4 h-4 text-rose-300"></i>
                  </div>
                </div>
                <div class="card-content relative bg-white/5 ring-1 ring-white/10 p-3 transition-transform duration-300 ease-out cursor-pointer">
                  <div class="flex items-start gap-3">
                    <div class="shrink-0">
                      <div class="w-8 h-8 rounded-md bg-slate-900 ring-1 ring-white/10 flex items-center justify-center">
                        <i data-lucide="file-text" class="w-4 h-4 text-slate-300"></i>
                      </div>
                    </div>
                    <div class="flex-1 min-w-0">
                      <div class="flex items-center gap-2 mb-1">
                        <button class="inbox-tag inline-flex items-center gap-1.5 text-[11px] px-1.5 py-0.5 rounded bg-white/5 text-slate-300 ring-1 ring-white/10">
                          <i data-lucide="tag" class="w-3.5 h-3.5"></i> Unsorted
                        </button>
                        <span class="text-[11px] text-slate-400 flex items-center gap-1"><i data-lucide="clock" class="w-3.5 h-3.5"></i>Mon</span>
                      </div>
                      <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">Invoice from Riverside Dental</h3>
                      <p class="text-[13px] text-slate-400 line-clamp-2">Your invoice for the last visit is attached. Balance due by the end of the month.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Inbox Empty State (first-time friendly) -->
            <div id="inboxEmpty" class="hidden mt-6">
              <div class="rounded-xl bg-white/5 ring-1 ring-white/10 p-5">
                <div class="flex items-start gap-3">
                  <div class="w-12 h-12 rounded-lg bg-slate-900 ring-1 ring-white/10 flex items-center justify-center">
                    <i data-lucide="inbox" class="w-5 h-5 text-cyan-300"></i>
                  </div>
                  <div class="flex-1">
                    <h3 class="text-[15px] font-medium tracking-tight text-slate-100">Your space is ready</h3>
                    <p class="text-[13px] text-slate-400 mt-0.5">A calm inbox starts empty. Add one thing and let the system hold it for you.</p>
                    <ul class="mt-3 space-y-2">
                      <li class="flex items-start gap-2">
                        <i data-lucide="plus-circle" class="w-4 h-4 text-cyan-300 mt-0.5"></i>
                        <span class="text-[13px] text-slate-300">Capture a quick note, link, or idea.</span>
                      </li>
                      <li class="flex items-start gap-2">
                        <i data-lucide="tag" class="w-4 h-4 text-cyan-300 mt-0.5"></i>
                        <span class="text-[13px] text-slate-300">Optionally tag it as Work, Life, or Inspiration.</span>
                      </li>
                      <li class="flex items-start gap-2">
                        <i data-lucide="wand-2" class="w-4 h-4 text-cyan-300 mt-0.5"></i>
                        <span class="text-[13px] text-slate-300">We'll keep things tidy and stress-free.</span>
                      </li>
                    </ul>
                    <div class="mt-4 flex items-center gap-2">
                      <button id="inboxGetStarted" class="inline-flex items-center gap-1.5 text-[13px] px-3 py-2 rounded-md bg-cyan-500/15 hover:bg-cyan-500/25 text-cyan-300 ring-1 ring-cyan-500/25">
                        <i data-lucide="pencil" class="w-4 h-4"></i>
                        Capture something quick
                      </button>
                      <button id="inboxBrowseLibrary" class="inline-flex items-center gap-1.5 text-[13px] px-3 py-2 rounded-md bg-white/5 hover:bg-white/10 text-slate-300 ring-1 ring-white/10">
                        <i data-lucide="library" class="w-4 h-4"></i>
                        Explore Library
                      </button>
                    </div>
                  </div>
                  <img src="https://images.unsplash.com/photo-1545665277-5937489579f2?q=80&w=240&auto=format&fit=crop" alt="" class="hidden sm:block w-20 h-20 rounded-lg object-cover ring-1 ring-white/10">
                </div>
              </div>
            </div>

            <!-- Gentle divider -->
            <div class="mt-6 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>
          </div>
        </section>

        <!-- LIBRARY -->
        <section id="screen-library" class="absolute inset-0 overflow-y-auto hidden will-change-transform opacity-0 translate-y-1 transition-all duration-300">
          <div class="px-4 pt-5 pb-28">
            <div class="flex items-center justify-between mb-3">
              <h1 class="text-[20px] tracking-tight font-semibold text-slate-100">Library</h1>
            </div>

            <!-- Filters -->
            <div class="flex items-center gap-2 mb-4">
              <div id="categoryFilters" class="flex items-center gap-2">
                <button data-cat="all" class="cat-pill inline-flex items-center gap-1.5 text-[12px] px-2.5 py-1.5 rounded-full bg-white/10 text-slate-200 ring-1 ring-white/10">All</button>
                <button data-cat="work" class="cat-pill inline-flex items-center gap-1.5 text-[12px] px-2.5 py-1.5 rounded-full bg-white/5 text-slate-300 ring-1 ring-white/10">Work</button>
                <button data-cat="life" class="cat-pill inline-flex items-center gap-1.5 text-[12px] px-2.5 py-1.5 rounded-full bg-white/5 text-slate-300 ring-1 ring-white/10">Life</button>
                <button data-cat="inspiration" class="cat-pill inline-flex items-center gap-1.5 text-[12px] px-2.5 py-1.5 rounded-full bg-white/5 text-slate-300 ring-1 ring-white/10">Inspiration</button>
              </div>
            </div>

            <!-- Library Grid -->
            <div id="libraryGrid" class="grid grid-cols-1 gap-3">
              <article class="lib-item rounded-xl bg-white/5 ring-1 ring-white/10 p-3" data-cat="work">
                <div class="flex items-start gap-3">
                  <div class="w-10 h-10 rounded-md bg-slate-900 ring-1 ring-white/10 flex items-center justify-center">
                    <i data-lucide="file-text" class="w-4 h-4 text-slate-300"></i>
                  </div>
                  <div class="flex-1 min-w-0">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-[11px] px-1.5 py-0.5 rounded bg-cyan-400/10 text-cyan-300 ring-1 ring-cyan-400/20">Work</span>
                      <span class="text-[11px] text-slate-400">Added today</span>
                    </div>
                    <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">Team meeting notes template</h3>
                    <p class="text-[13px] text-slate-400 line-clamp-2">A calm format to capture decisions, owners, and next steps without noise.</p>
                  </div>
                </div>
              </article>

              <article class="lib-item rounded-xl bg-white/5 ring-1 ring-white/10 p-3" data-cat="life">
                <div class="flex items-start gap-3">
                  <img src="https://images.unsplash.com/photo-1621619856624-42fd193a0661?w=1080&q=80" alt="Plants" class="w-14 h-14 rounded-md object-cover ring-1 ring-white/10">
                  <div class="flex-1 min-w-0">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-[11px] px-1.5 py-0.5 rounded bg-cyan-400/10 text-cyan-300 ring-1 ring-cyan-400/20">Life</span>
                      <span class="text-[11px] text-slate-400">Added this week</span>
                    </div>
                    <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">Low-maintenance houseplants</h3>
                    <p class="text-[13px] text-slate-400 line-clamp-2">Notes and links on plants that thrive with gentle attention.</p>
                  </div>
                </div>
              </article>

              <article class="lib-item rounded-xl bg-white/5 ring-1 ring-white/10 p-3" data-cat="inspiration">
                <div class="flex items-start gap-3">
                  <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=400&auto=format&fit=crop" alt="Sunset" class="w-14 h-14 rounded-md object-cover ring-1 ring-white/10">
                  <div class="flex-1 min-w-0">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-[11px] px-1.5 py-0.5 rounded bg-cyan-400/10 text-cyan-300 ring-1 ring-cyan-400/20">Inspiration</span>
                      <span class="text-[11px] text-slate-400">Saved earlier</span>
                    </div>
                    <h3 class="text-[15px] font-medium tracking-tight text-slate-100 truncate">Calm color palettes</h3>
                    <p class="text-[13px] text-slate-400 line-clamp-2">Muted gradients and soft contrasts for restful interfaces.</p>
                  </div>
                </div>
              </article>
            </div>

            <!-- Library Filtered Empty -->
            <div id="libraryFilteredEmpty" class="hidden mt-6">
              <div class="rounded-xl bg-white/5 ring-1 ring-white/10 p-5">
                <div class="flex items-start gap-3">
                  <div class="w-12 h-12 rounded-lg bg-slate-900 ring-1 ring-white/10 flex items-center justify-center">
                    <i data-lucide="filter" class="w-5 h-5 text-cyan-300"></i>
                  </div>
                  <div class="flex-1">
                    <h3 class="text-[15px] font-medium tracking-tight text-slate-100"><span id="libFilterTitle">No items in Work</span></h3>
                    <p class="text-[13px] text-slate-400 mt-0.5">Try clearing the filter, or capture something new in this category.</p>
                    <div class="mt-3 flex items-center gap-2">
                      <button id="clearLibFilter" class="inline-flex items-center gap-1.5 text-[13px] px-3 py-2 rounded-md bg-white/5 hover:bg-white/10 text-slate-300 ring-1 ring-white/10">
                        <i data-lucide="x-circle" class="w-4 h-4"></i>
                        Clear filter
                      </button>
                      <button id="captureForFilter" class="inline-flex items-center gap-1.5 text-[13px] px-3 py-2 rounded-md bg-cyan-500/15 hover:bg-cyan-500/25 text-cyan-300 ring-1 ring-cyan-500/25">
                        <i data-lucide="pencil" class="w-4 h-4"></i>
                        Capture to <span id="filterCatName">Work</span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Library Empty State (enhanced) -->
            <div id="libraryEmpty" class="hidden mt-6">
              <div class="rounded-xl bg-white/5 ring-1 ring-white/10 p-5">
                <div class="flex items-start gap-3">
                  <div class="w-12 h-12 rounded-lg bg-slate-900 ring-1 ring-white/10 flex items-center justify-center">
                    <i data-lucide="bookmark" class="w-5 h-5 text-cyan-300"></i>
                  </div>
                  <div class="flex-1">
                    <h3 class="text-[15px] font-medium tracking-tight text-slate-100">Your library is waiting</h3>
                    <p class="text-[13px] text-slate-400 mt-0.5">Save your first article, idea, or note — we'll keep it neatly organized.</p>
                    <ul class="mt-3 space-y-2">
                      <li class="flex items-start gap-2">
                        <i data-lucide="book-open" class="w-4 h-4 text-cyan-300 mt-0.5"></i>
                        <span class="text-[13px] text-slate-300">Add a link you want to read later.</span>
                      </li>
                      <li class="flex items-start gap-2">
                        <i data-lucide="image" class="w-4 h-4 text-cyan-300 mt-0.5"></i>
                        <span class="text-[13px] text-slate-300">Save an image or idea for inspiration.</span>
                      </li>
                    </ul>
                    <div class="mt-4 flex items-center gap-2">
                      <button id="libraryGetStarted" class="inline-flex items-center gap-1.5 text-[13px] px-3 py-2 rounded-md bg-cyan-500/15 hover:bg-cyan-500/25 text-cyan-300 ring-1 ring-cyan-500/25">
                        <i data-lucide="save" class="w-4 h-4"></i>
                        Save your first item
                      </button>
                      <button id="libraryCaptureIdea" class="inline-flex items-center gap-1.5 text-[13px] px-3 py-2 rounded-md bg-white/5 hover:bg-white/10 text-slate-300 ring-1 ring-white/10">
                        <i data-lucide="pencil" class="w-4 h-4"></i>
                        Capture an idea
                      </button>
                    </div>
                  </div>
                  <img src="https://images.unsplash.com/photo-1487017159836-4e23ece2e4cf?q=80&w=240&auto=format&fit=crop" alt="" class="hidden sm:block w-20 h-20 rounded-lg object-cover ring-1 ring-white/10">
                </div>
              </div>
            </div>

            <!-- Gentle divider -->
            <div class="mt-6 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>
          </div>
        </section>
      </main>

      <!-- Bottom Navigation -->
      <nav class="px-4 pb-[max(1rem,env(safe-area-inset-bottom))] pt-2 sticky bottom-0 bg-slate-950/85 backdrop-blur supports-[backdrop-filter]:bg-slate-950/70 border-t border-white/5 z-40">
        <div class="w-full max-w-[460px] mx-auto grid grid-cols-3 gap-2">
          <button data-nav="now" class="tab-btn inline-flex flex-col items-center gap-1 px-3 py-2 rounded-lg ring-1 ring-white/10 bg-white/5">
            <i data-lucide="home" class="w-4 h-4 text-cyan-300"></i>
            <span class="text-[12px] text-slate-300">Now</span>
          </button>
          <button data-nav="inbox" class="tab-btn inline-flex flex-col items-center gap-1 px-3 py-2 rounded-lg ring-1 ring-white/10 bg-white/0 hover:bg-white/5 transition">
            <i data-lucide="inbox" class="w-4 h-4 text-slate-300"></i>
            <span class="text-[12px] text-slate-300">Inbox</span>
          </button>
          <button data-nav="library" class="tab-btn inline-flex flex-col items-center gap-1 px-3 py-2 rounded-lg ring-1 ring-white/10 bg-white/0 hover:bg-white/5 transition">
            <i data-lucide="library" class="w-4 h-4 text-slate-300"></i>
            <span class="text-[12px] text-slate-300">Library</span>
          </button>
        </div>
      </nav>
    </div>
  </div>

  <!-- Floating Quick Capture Button -->
  <button id="fabCapture" aria-label="Quick Capture" aria-haspopup="dialog" aria-controls="captureModal" aria-expanded="false" class="fixed right-4 bottom-24 z-50 inline-flex items-center justify-center w-12 h-12 rounded-full bg-cyan-500/20 hover:bg-cyan-500/30 ring-1 ring-cyan-400/30 shadow-lg backdrop-blur">
    <i data-lucide="plus" class="w-5 h-5 text-cyan-300"></i>
  </button>

  <!-- Quick Capture Modal -->
  <div id="captureModal" class="hidden fixed inset-0 z-[85]" role="dialog" aria-modal="true" aria-labelledby="captureTitleLabel">
    <div id="captureBackdrop" class="absolute inset-0 bg-slate-950/60 opacity-0 transition-opacity duration-200"></div>
    <div class="absolute inset-0 flex items-end sm:items-center justify-center p-3 sm:p-4">
      <div id="captureSheet" class="w-full max-w-[520px] sm:rounded-2xl bg-slate-950 ring-1 ring-white/10 shadow-2xl translate-y-6 sm:translate-y-0 sm:scale-[0.98] opacity-0 transition-all duration-200 will-change-transform">
        <div class="flex items-center justify-between px-4 pt-3 pb-2 border-b border-white/5">
          <h2 id="captureTitleLabel" class="text-[18px] tracking-tight font-semibold text-slate-100">Quick Capture</h2>
          <button id="captureClose" class="inline-flex items-center justify-center w-9 h-9 rounded-md bg-white/5 hover:bg-white/10 ring-1 ring-white/10">
            <i data-lucide="x" class="w-4 h-4 text-slate-200"></i>
          </button>
        </div>

        <form id="captureForm" class="px-4 pt-3 pb-4">
          <div class="space-y-3">
            <div>
              <label for="capTitle" class="block text-[12px] text-slate-400 mb-1">Title <span class="text-slate-500">(required)</span></label>
              <input id="capTitle" name="title" type="text" required aria-required="true" placeholder="What's this about?" class="w-full text-[14px] px-3 py-2 rounded-md bg-white/5 ring-1 ring-white/10 focus:ring-cyan-400/30 focus:outline-none placeholder:text-slate-500 text-slate-200">
              <p id="capTitleErr" class="mt-1 text-[12px] text-rose-300 hidden">Please enter a title.</p>
            </div>

            <div>
              <label for="capNotes" class="block text-[12px] text-slate-400 mb-1">Notes</label>
              <textarea id="capNotes" name="notes" rows="3" placeholder="Optional details…" class="w-full text-[14px] px-3 py-2 rounded-md bg-white/5 ring-1 ring-white/10 focus:ring-cyan-400/30 focus:outline-none placeholder:text-slate-500 text-slate-200"></textarea>
            </div>

            <div>
              <label for="capUrl" class="block text-[12px] text-slate-400 mb-1">Link</label>
              <input id="capUrl" name="url" type="url" inputmode="url" placeholder="https://…" class="w-full text-[14px] px-3 py-2 rounded-md bg-white/5 ring-1 ring-white/10 focus:ring-cyan-400/30 focus:outline-none placeholder:text-slate-500 text-slate-200">
            </div>

            <div>
              <div class="flex items-center justify-between">
                <label class="text-[12px] text-slate-400">Tag</label>
                <span id="capTagHint" class="text-[11px] text-slate-500">Optional</span>
              </div>
              <div id="capTagGroup" role="radiogroup" aria-label="Tag" class="mt-1 inline-flex p-0.5 rounded-lg bg-white/5 ring-1 ring-white/10">
                <button type="button" role="radio" aria-checked="false" data-tag="work" class="px-3 py-1.5 text-[13px] rounded-md text-slate-300 hover:text-slate-200 inline-flex items-center gap-1.5">
                  <i data-lucide="briefcase" class="w-4 h-4"></i>
                  Work
                </button>
                <button type="button" role="radio" aria-checked="false" data-tag="life" class="px-3 py-1.5 text-[13px] rounded-md text-slate-300 hover:text-slate-200 inline-flex items-center gap-1.5">
                  <i data-lucide="heart" class="w-4 h-4"></i>
                  Life
                </button>
                <button type="button" role="radio" aria-checked="false" data-tag="inspiration" class="px-3 py-1.5 text-[13px] rounded-md text-slate-300 hover:text-slate-200 inline-flex items-center gap-1.5">
                  <i data-lucide="sparkles" class="w-4 h-4"></i>
                  Inspiration
                </button>
              </div>
            </div>
          </div>

          <div class="mt-4 flex items-center justify-end gap-2 border-t border-white/5 pt-3">
            <button type="button" id="capCancel" class="inline-flex items-center gap-1.5 text-[13px] px-3 py-2 rounded-md bg-white/5 hover:bg-white/10 ring-1 ring-white/10 text-slate-300">
              <i data-lucide="x" class="w-4 h-4"></i>
              Cancel
            </button>
            <button type="submit" id="capSave" class="inline-flex items-center gap-1.5 text-[13px] px-3 py-2 rounded-md bg-cyan-500/15 hover:bg-cyan-500/25 text-cyan-300 ring-1 ring-cyan-500/25">
              <i data-lucide="save" class="w-4 h-4"></i>
              Save
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Category menu (appears when tapping "Unsorted") -->
  <div id="catMenu" class="hidden fixed z-[90] min-w-[180px] rounded-lg bg-slate-900/95 backdrop-blur ring-1 ring-white/10 p-1 shadow-2xl">
    <div class="px-2 py-1">
      <p class="text-[11px] text-slate-400">Move to</p>
    </div>
    <button data-cat-option="work" class="w-full flex items-center gap-2 px-2.5 py-2 rounded-md hover:bg-white/5 text-[13px] text-slate-200">
      <span class="inline-flex w-6 h-6 items-center justify-center rounded bg-cyan-400/10 ring-1 ring-cyan-400/20">
        <i data-lucide="briefcase" class="w-3.5 h-3.5 text-cyan-300"></i>
      </span>
      Work
    </button>
    <button data-cat-option="life" class="w-full flex items-center gap-2 px-2.5 py-2 rounded-md hover:bg-white/5 text-[13px] text-slate-200">
      <span class="inline-flex w-6 h-6 items-center justify-center rounded bg-emerald-400/